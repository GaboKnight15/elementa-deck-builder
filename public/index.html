<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elementa</title>
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css?family=Orbitron:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- LOGIN/SIGNUP -->
  <div id="login-menu">
    <form id="login-form">
      <input type="text" id="login-username-input" placeholder="Username" maxlength="20" autocomplete="username">
      <input type="email" id="login-email-input" placeholder="Email" autocomplete="email">
      <input type="password" id="login-password-input" placeholder="Password" autocomplete="current-password">
      <button id="login-btn" class="btn-primary" type="submit">Login</button>
      <button id="signup-btn" class="btn-primary" type="button">Sign Up</button> 
     </form>
     <div id="login-error" style="color:red;"></div>
   </div>
<div id="loading-overlay" style="position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:9999;background:#181f2b;display:none;align-items:center;justify-content:center;">
  <div class="loader"></div>
</div>
<style>.loader {border: 8px solid #f3f3f3; border-top: 8px solid #ffe066; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite;}
@keyframes spin { 100% { transform: rotate(360deg); } }</style>
    <!-- HEADER -->
<header id="main-header">
  <h1 class="elementa-title">Elementa</h1>
    <!-- PROFILE AREA -->
    <div id="profile-area">
      <img id="profile-pic" src="CardImages/Avatars/Default.png" alt="Profile">
    </div>
    <!-- PLAYER LEVEL -->  
  <div id="player-level-widget">
  <span id="player-level-label">Lv 1</span>
  <div id="player-exp-bar-bg">
    <div id="player-exp-bar-fill"></div>
  </div>
  <span id="player-exp-numbers">0/100</span>
</div>
  <!-- PROFILE MENU -->
    <div id="profile-menu">
      <div id="profile-account-section">
        <div id="profile-banner-container">
          <img id="profile-banner" src="CardImages/Banners/DefaultBanner.png" alt="Banner">
        </div>
        <div id="profile-info">
          <div id="profile-username-display"></div>
        </div>
        <button id="change-profile-btn" class="btn-primary">Profile Pic</button>
      </div>
    </div>

  <!-- PROFILE ICONS MENU -->
  <div id="profile-icon-modal" class="modal">
    <div id="profile-icon-modal-content" class="modal-content">
      <h3>Choose your Avatar</h3>
      <div id="profile-icons"></div>
      <button id="close-profile-icon-modal" class="btn-negative" style="margin-top:14px;">Cancel</button>
    </div>
  </div>
  <!-- BANNER MODAL -->
<div id="profile-banner-modal" class="modal">
  <div id="profile-banner-modal-content" class="modal-content">
    <h3>Choose your Banner</h3>
    <div id="profile-banners"></div>
    <button id="close-profile-banner-modal" class="btn-negative" style="margin-top:14px;">Cancel</button>
  </div>
</div>
    <!-- COINS -->
  <div id="currency-display">
    <span class="currency-display">
      <img class="currency-icon" src="OtherImages/Currency/Coins.png" alt="Coins">
      <span id="currency-amount">0</span>
    </span>
        <!-- ESSENCE -->
    <span class="currency-display">
      <img class="currency-icon" src="OtherImages/Icons/Essence.png" alt="Essence">
      <span id="essence-amount">0</span>
    </span>  
  <button id="add-coins-btn" style="position:absolute;top:40px;right:30px;z-index:999;">Add 100 Coins</button>
  </div>
  
   <!-- QUESTS & ACHIEVEMENTS ICONS -->
  <div id="header-icons">
    <!-- In your HTML header/navigation -->
   <div style="position:relative; display:inline-block;"> 
    <img id="friends-icon" src="OtherImages/Icons/Friends.png" alt="Friends" style="width:32px;cursor:pointer;margin-right:12px;">
    <span id="friends-notification-dot" class="header-notification-dot" style="display:none;"></span>
   </div>
     <span id="quests-icon-wrapper" style="position:relative;display:inline-block;">
      <img src="OtherImages/Icons/Quest.png" alt="quests" id="quests-icon" class="header-action-icon" title="quests">
      <span id="quests-notification-dot" class="header-notification-dot" style="display:none;"></span>
    </span>
    <span id="achievements-icon-wrapper" style="position:relative;display:inline-block;">
      <img src="OtherImages/Icons/Rewards.png" alt="Achievements" id="achievements-icon" class="header-action-icon" title="Achievements">
      <span id="achievements-notification-dot" class="header-notification-dot" style="display:none;"></span>
    </span>
  </div>
  <!-- SETTINGS BURGER BUTTON -->
  <span id="settings-burger-wrapper">
    <img src="OtherImages/Icons/Burger.png" 
       alt="Settings" 
       id="settings-burger" 
       class="header-action-icon" 
       title="Settings">
  </span>
</header>

                              <!-- NAVIGATION -->
<div id="app-main">  
  <nav id="main-nav">
    <button id="gallery-btn" class="btn-primary" data-section="gallery-section">Gallery</button>
    <button id="builder-btn" class="btn-primary" data-section="builder-section">Deck Builder</button>
    <button id="gameplay-btn" class="btn-primary" data-section="gameplay-section">Start Game</button>
    <button id="shop-btn" class="btn-primary" data-section="shop-section">Shop</button>
  </nav>
  
                              <!-- GALLERY -->
<section id="gallery-section" class="section active">
  <div id="gallery-container" class="section-container">
<!-- FILTER GALLERY -->
  <div id="filters-gallery" class="filter-row">
    <label>
      Name:
      <input type="text" id="filter-name-gallery" placeholder="Search by name..." />
    </label>
    <label>Color:
      <select id="filter-color-gallery" class="filter-select">
        <option value="">All</option><option value="green">Green</option><option value="red">Red</option>
        <option value="blue">Blue</option><option value="gray">Gray</option><option value="purple">Purple</option>
        <option value="yellow">Yellow</option><option value="black">Black</option><option value="white">White</option>
      </select>
    </label>
  <label>Category:
  <select id="filter-category-gallery" class="filter-select">
    <option value="">All</option><option value="creature">Creature</option><option value="artifact">Artifact</option>
    <option value="spell">Spell</option><option value="domain">Domain</option>
  </select>
  </label>
    <label>Type:
      <select id="filter-type-gallery" class="filter-select">
        <option value="">All</option><option value="evolution">Evolution</option><option value="fusion">Fusion</option><option value="elemental">Elemental</option><option value="dragon">Dragon</option><option value="construct">Construct</option><option value="beast">Beast</option> <option value="undead">Undead</option><option value="demon">Demon</option>
        <option value="mage">Mage</option><option value="equipment">Equipment</option><option value="relic">Relic</option>
      </select>
    </label>
    <label>Rarity:
      <select id="filter-rarity-gallery" class="filter-select">
        <option value="">All</option><option value="Basic">Basic</option><option value="Common">Common</option>
        <option value="Rare">Rare</option><option value="Legendary">Legendary</option>
      </select>
    </label>
    <label>Archetype:
      <select id="filter-archetype-gallery" class="filter-select">
        <option value="">All</option><option value="Blazefeather">Blazefeather</option><option value="Cindercore">Cindercore</option>
        <option value="Coralbound">Coralbound</option><option value="Frostlands">Frostlands</option>
        <option value="Golemheart">Golemheart</option><option value="Moonfang">Moonfang</option><option value="Skullframe">Skullframe</option><option value="Voltwing">Voltwing</option><option value="Zephyra">Zephyra</option>
      </select>
    </label>
    <label>Ability:
      <select id="filter-ability-gallery" class="filter-select">
        <option value="">All</option><option value="ambush">Ambush</option>
        <option value="dive">Dive</option><option value="burn">Burn</option><option value="drain">Drain</option>
        <option value="elusive">Elusive</option><option value="flying">Flying</option><option value="ice armor">Ice Armor</option><option value="immunity">Immunity</option>
        <option value="intimidate">Intimidate</option><option value="leap">Leap</option><option value="lifelink">Lifelink</option>
        <option value="protect">Protect</option><option value="provoke">Provoke</option><option value="ranged">Ranged</option>
        <option value="rush">Rush</option><option value="toxic">Toxic</option>
      </select>
    </label>
  </div>
    <div id="gallery-cards"></div>
  </div>  
</section>

  
                      <!-- DECK BUILDER -->
<section id="builder-section" class="section">  
  <div id="builder-container" class="section-container">
      <button id="builder-back-btn" style="display:none;">Back</button>
      <button id="addDeckSlotBtn" style="display:none;">Add Deck</button>
      <button id="deleteDeckSlotBtn" style="display:none;">Delete Deck</button>
      <select id="deckSlotSelect" style="display:none;"></select>
    <!-- Deck Tile Context Menu Modal -->
<div id="deck-menu-modal" class="modal" style="display:none;">
  <div class="modal-content deck-menu-modal-content">
    <!-- Banner and Cardback container, side by side -->
      <div id="deck-banner-container">
        <img id="deck-banner-img" src="CardImages/Banners/DefaultBanner.png" alt="Deck Banner">
      </div>
    <div id="deck-title-row" style="display: flex; align-items: center; gap: 14px; margin-bottom: 10px;">
      <h3 id="deck-menu-title" style="margin:0; font-size:1.3em;"></h3>
      <span id="deck-card-count" style="background:#22304a;color:#ffe066;font-weight:bold;border-radius:9px;padding:4px 13px;font-size:1em;box-shadow:0 1px 4px #0002;"></span>
      <img id="deck-cardback-img" src="OtherImages/Cardbacks/DefaultCardback.png" alt="Deck Cardback"
        style="width:44px;height:62px;object-fit:cover;cursor:pointer;border-radius:7px;box-shadow:0 2px 8px #0005;">
    </div>
    <button id="edit-deck-btn" class="btn-primary">Edit Deck</button>
    <button id="view-deck-btn" class="btn-secondary">View Deck</button>
    <button id="set-highlight-art-btn" class="btn-secondary">Highlight Card</button>
    <button id="rename-deck-btn" class="btn-secondary">Rename</button>
    <button id="delete-deck-btn" class="btn-negative-secondary">Delete</button>
    <button id="close-deck-menu-btn" class="btn-negative-secondary">Cancel</button>
  </div>
</div>
<!-- Modal for viewing cards in deck -->
<div id="deck-view-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <h3 id="deck-view-modal-title"></h3>
    <div class="modal-card-list" id="deck-view-modal-list"></div>
    <button id="close-deck-view-modal-btn" class="btn-secondary">Close</button>
  </div>
</div>
<!-- BANNER MODAL DECK -->
<div id="deck-banner-modal" class="modal">
  <div class="modal-content">
    <h3>Choose Banner Artwork</h3>
    <div id="deck-banner-art-list"></div>
    <button id="close-deck-banner-modal" class="btn-secondary" style="margin-top:14px;">Cancel</button>
  </div>
</div>
<!-- CARD BACK MODAL DECK -->
<div id="deck-cardback-modal" class="modal">
  <div class="modal-content">
    <h3>Choose Deck Cardback</h3>
    <div id="deck-cardback-art-list"></div>
    <button id="close-deck-cardback-modal" class="btn-secondary" style="margin-top:14px;">Cancel</button>
  </div>
</div>
<!-- DECK SLOTS -->
    <div id="deck-selection-grid" class="deck-selection-grid"></div>
      <div id="deck-builder-ui">
        <div class="builder-main">
  <!-- FILTER GALLERY BUILDER -->
  <div id="filters-builder" class="filter-row">
    <label>
      Name:
      <input type="text" id="filter-name-builder" class="filter-name" placeholder="Search by name..." />
    </label>
    <label>Color:
      <select id="filter-color-builder" class="filter-select">
        <option value="">All</option>
        <option value="green">Green</option>
        <option value="red">Red</option>
        <option value="blue">Blue</option>
        <option value="gray">Gray</option>
        <option value="purple">Purple</option>
        <option value="yellow">Yellow</option>
        <option value="black">Black</option>
        <option value="white">White</option>
      </select>
    </label>
  <label>Category:
  <select id="filter-category-builder" class="filter-select">
    <option value="">All</option>
    <option value="creature">Creature</option>
    <option value="artifact">Artifact</option>
    <option value="spell">Spell</option>
    <option value="domain">Domain</option>
  </select>
  </label>
    <label>Type:
      <select id="filter-type-builder" class="filter-select">
        <option value="">All</option>
        <option value="evolution">Evolution</option>
        <option value="fusion">Fusion</option>
        <option value="elemental">Elemental</option>
        <option value="dragon">Dragon</option>
        <option value="construct">Construct</option>
        <option value="beast">Beast</option>
        <option value="undead">Undead</option>
        <option value="demon">Demon</option>
        <option value="mage">Mage</option>
        <option value="equipment">Equipment</option>
        <option value="relic">Relic</option>
      </select>
    </label>
    <label>Rarity:
      <select id="filter-rarity-builder" class="filter-select">
        <option value="">All</option>
        <option value="Basic">Basic</option>
        <option value="Common">Common</option>
        <option value="Rare">Rare</option>
        <option value="Legendary">Legendary</option>
      </select>
    </label>
    <label>Archetype:
      <select id="filter-archetype-builder" class="filter-select">
        <option value="">All</option>
        <option value="Blazefeather">Blazefeather</option>
        <option value="Cindercore">Cindercore</option>
        <option value="Coralbound">Coralbound</option>
        <option value="Frostlands">Frostlands</option>
        <option value="Golemheart">Golemheart</option>
        <option value="Moonfang">Moonfang</option>
        <option value="Skullframe">Skullframe</option>
        <option value="Voltwing">Voltwing</option>
        <option value="Zephyra">Zephyra</option>
      </select>
    </label>
    <label>Ability:
      <select id="filter-ability-builder" class="filter-select">
        <option value="">All</option><option value="ambush">Ambush</option>
        <option value="dive">Dive</option><option value="burn">Burn</option><option value="drain">Drain</option><option value="elusive">Elusive</option><option value="flying">Flying</option>
        <option value="ice armor">Ice Armor</option><option value="immunity">Immunity</option><option value="intimidate">Intimidate</option>
        <option value="leap">Leap</option><option value="lifelink">Lifelink</option><option value="protect">Protect</option>
        <option value="provoke">Provoke</option><option value="ranged">Ranged</option><option value="rush">Rush</option><option value="toxic">Toxic</option>
      </select>
    </label>
  </div>
    <div id="gallery-builder-cards"></div>
  </div>    
        
    <div id="deck-panel">
      <h2 id="deck-title">Your Deck</h2>
      <ul class="deck-list" id="deck-list"></ul>
      <p>Total Cards: <span id="card-count">0</span>/50</p>
      <button id="back-builder-btn" class="btn-negative" style="margin-bottom: 10px;">Back</button>
      <button id="reset-deck-btn" class="btn-negative">Reset Deck</button>
    </div>
  </div>
</div>  
</section>

                      <!-- GAME MODE SELECTION -->  
<section id="mode-select-section" class="section">
  <div id="mode-select-container" class="section-container">
    <h2>Select Game Mode</h2>
    <div class="mode-options">
      <button class="mode-btn" data-mode="solo">Solo</button>
      <button class="mode-btn" data-mode="private">Private</button>
      <button class="mode-btn" data-mode="casual">Casual</button>
      <button class="mode-btn" data-mode="ranked">Ranked</button>
    </div>
  </div>
</section>

  
                    <!-- BATTLEFIELD UI -->  
<section id="gameplay-section" class="section">  
  <div id="gameplay-container" class="section-container">
  <!-- BATTLEFIELD RIGHTBAR -->
    <div id="battlefield-leftbar">
      <div id="lobby-topbar" class="lobby-topbar" style="display:none;">
        <button id="leave-btn" class="btn-negative">Leave</button>
        <button id="new-match-btn" class="btn-secondary">New Match</button>
    </div>
    <div id="opponent-profile" class="profile-panel" style="display:none;"></div>
    <!-- LOBBY UI -->
      <div id="lobby-ui">
        <button id="create-btn" class="btn-secondary">Create Game</button>
        <input id="room-code-input" placeholder="Enter code to join...">
        <button id="join-btn" class="btn-secondary">Join Game</button>
        <div id="status"></div>
      </div>
      <!-- CHAT UI -->
      <div id="chat-ui">
        <div id="chat-log"></div>
        <button id="send-chat-btn">Send</button>     
        <input id="chat-input" placeholder="Type message...">
      </div>
      <div id="my-profile" class="profile-panel"></div>
    </div>
  
<div id="battlefield">
  <div id="opponent-hand"           class="hand-area"></div>
  <div id="opponent-domains-zone"   class="zone-row"></div>
  <div id="opponent-creatures-zone" class="zone-row"></div>
  <div id="player-creatures-zone"   class="zone-row"></div>
  <div id="player-domains-zone"     class="zone-row"></div>
  <div id="player-hand"             class="hand-area"></div>
</div>
    
  <!-- BATTLEFIELD RIGHTBAR -->
    <div id="battlefield-rightbar">
      <div id="opponent-deck-zone"></div>
      <div id="opponent-void-zone"></div>
      <!-- PHASES -->
<div id="phase-badge">
  <span id="phase-label"></span>
  <button id="next-phase-btn" class="btn-primary">Next Phase</button>
</div>
      <div id="player-void-zone"></div>
      <div id="player-deck-zone"></div>
    </div>
  </div>
</section>

                    <!-- SHOP -->
<section id="shop-section" class="section">
  <div id="shop-container" class="section-container">
    <div id="pack-options">
      <img class="pack-image" src="CardImages/Packs/StandardPack.png" alt="Standard Pack" data-pack="StandardPack">
      <img class="pack-image" src="CardImages/Packs/StandardPack2.png" alt="Standard Pack 2" data-pack="StandardPack2">
    </div>
    <div id="shop-cosmetics">
  <div id="shop-profile-pics" class="shop-division">
    <h3>Profile Avatars</h3>
    <div id="shop-avatars-grid"></div>
  </div>
  <div id="shop-banners" class="shop-division">
    <h3>Profile Banners</h3>
    <div id="shop-banners-grid"></div>
  </div>
  <div id="shop-cardbacks" class="shop-division">
    <h3>Card Sleeves</h3>
    <div id="shop-cardbacks-grid"></div>
  </div>
  <div id="shop-single-cards" class="shop-division">
    <h3>Individual Cards</h3>
  </div>
</div>
  </div>
</section>  
</div>

<!-- QUESTS MODAL -->
<div id="quests-modal" class="modal">
  <div class="modal-content" style="min-width:600px;max-width:800px;">
    <h3>Quests</h3>
    <div id="quests-columns" style="display:flex;gap:0;justify-content:space-between;align-items:flex-start;">
      <div style="flex:1;padding:0 18px;">
        <div style="font-weight:bold;font-size:1.13em;margin-bottom:8px;">Quests</div>
        <div id="quests-timer"></div>
        <div id="quests-list"></div>
      </div>
    </div>
    <button id="close-quests-modal" class="btn-negative-secondary" style="margin-top:16px;">Close</button>
  </div>
</div>

<!-- ACHIEVEMENTS MODAL -->
<div id="achievements-modal" class="modal">
  <div class="modal-content">
    <h3>Achievements</h3>
    <div id="achievements-list"></div>
    <button id="close-achievements-modal" class="btn-negative-secondary" style="margin-top:14px;">Close</button>
  </div>
</div> 
  
<!-- FRIEND LIST -->  
<!-- Friend Profile Modal -->
<div id="friends-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <h2>Your Friends</h2>
    <input id="add-friend-id" placeholder="Enter Friend ID" />
    <button onclick="addFriend(document.getElementById('add-friend-id').value)">Add Friend</button>
    <div style="margin-bottom:1em;">
      <input id="add-friend-username" placeholder="Username" style="padding:4px 8px; border-radius:4px; border:1px solid #333;">
      <button onclick="sendFriendRequest(document.getElementById('add-friend-username').value)" style="margin-left:8px;">
        Add Friend
      </button>
    </div>
    <div id="friends-list"></div>
    <button id="close-friends-modal" class="btn-negative-secondary" style="margin-top:14px;">Close</button>
  </div>
</div>
                        <!-- Modal for full image view -->
  <!-- DECK MODAL -->
  <div id="deck-selection-modal"></div>
<div id="deck-modal" class="modal">
  <div class="modal-content">
    <div class="modal-card-list"></div>
  </div>
</div>
  
  <!-- VOID MODAL -->
<div id="void-modal" class="modal">
  <div class="modal-content">
    <h3>Void</h3>
    <div class="modal-card-list"></div>
  </div>
</div>
  
<!-- SHOW FULL IMAGE -->
  <div id="image-modal" class="modal">
    <div id="modal-img-content"></div>
  </div>
  
<!-- HIGHLIGHT CARD IN BUILDER -->
<div id="highlight-art-modal" class="modal">
  <div class="modal-content">
    <h3>Select Highlight Artwork</h3>
    <div id="highlight-art-list"></div>
    <button id="close-highlight-art-btn" class="btn-negative-secondary">Close</button>
  </div>
</div>
  
<!-- PACK OPENING MODAL -->
<div id="pack-opening-modal" class="modal">
  <div class="modal-content" id="pack-opening-modal-content" style="max-width: 980px;">
    <h3>Pack Opened!</h3>
    <div id="opened-pack-row-modal" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px;"></div>
    <button id="close-pack-opening-modal" class="btn-secondary" style="margin-top:18px;">Close</button>
  </div>
</div>
<!-- SETTINGS MODAL -->
<div id="settings-modal" class="modal">
  <div class="modal-content" style="min-width:320px;max-width:400px;">
    <h3>Settings</h3>
    <div id="settings-menu">
      <div class="settings-item" id="settings-notices">
        <label>
          <span>Notices</span>
          <input type="checkbox" id="toggle-notices">
        </label>
      </div>
      <div class="settings-item" id="settings-music">
        <label>
          <span>Music</span>
          <input type="checkbox" id="toggle-music">
        </label>
      </div>
      <div class="settings-item" id="settings-logout" style="margin-top:20px;">
        <button id="settings-logout-btn" class="btn-negative">Logout</button>
      </div>
      <!-- Add more settings here -->
    </div>
    <button id="close-settings-modal" class="btn-negative-secondary" style="margin-top:16px;">Close</button>
  </div>
</div>

  <!-- CPU Deck Selection Modal -->
<div id="cpu-deck-modal" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:600px;">
    <h3>Choose Your Opponent's Deck</h3>
    <div id="cpu-deck-list" style="display:flex;flex-wrap:wrap;gap:16px;justify-content:center;"></div>
    <button id="close-cpu-deck-modal" class="btn-negative-secondary" style="margin-top:14px;">Cancel</button>
  </div>
</div>

<!-- Player Deck Selection Modal -->
<div id="player-deck-modal" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:600px;">
    <h3>Choose Your Deck</h3>
    <div id="player-deck-list" style="display:flex;flex-wrap:wrap;gap:16px;justify-content:center;"></div>
    <button id="close-player-deck-modal" class="btn-negative-secondary" style="margin-top:14px;">Cancel</button>
  </div>
</div>
  
<!-- SOUND EFFECTS -->  
<audio id="card-flip-sound" src="SoundEffects/CardFlip.mp3" preload="auto"></audio>
  
<!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<!-- Firebase Authentication -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script src="firebase.js"></script>
<!-- LOGIN -->
<script src="auth.js"></script>   
<!-- APP -->
<script src="shared.js"></script>
<script src="settings.js"></script>  
<script src="quest.js"></script>  
<script src="gallery.js"></script>
<script src="builder.js"></script>
<script src="gameplay.js"></script>
<script src="shop.js"></script> 
<!-- SERVER -->  
<script src="/socket.io/socket.io.js"></script>
<script src="client.js"></script>
 
</body> 
</html>
